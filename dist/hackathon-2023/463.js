/*! For license information please see 463.js.LICENSE.txt */
"use strict";(self.webpackChunkhackathon2023_mfe=self.webpackChunkhackathon2023_mfe||[]).push([[463],{7463:(e,t,r)=>{r.r(t);var n=r(745),a=r(136),i=r(5146);const o={en:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"Ask"},"aiSearchModal":{"questionTextAreaPlaceholder":"Type any question","header":"How can I help you today?"},"languages":{"english":"English","french":"Français (French)","hindi":"हिंदी (Hindi)"}}')},fr:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"Poser"},"aiSearchModal":{"questionTextAreaPlaceholder":"Tapez n\'importe quelle question","header":"Comment puis-je vous aider aujourd\'hui?"},"languages":{"english":"English (Anglais)","french":"Français","hindi":"हिंदी (Hindi)"}}')},hi:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"पूछना"},"aiSearchModal":{"questionTextAreaPlaceholder":"कोई भी प्रश्न टाइप करें","header":"आज मैं आपकी मदद करने में कैसे सक्षम हूं?"},"languages":{"english":"English (अंग्रेज़ी)","french":"Français (फ़्रेंच)","hindi":"हिंदी"}}')}},s=(0,i.createInstance)({fallbackLng:"en",debug:!0,cleanCode:!0,resources:o,defaultNS:"hackathon2023Mfe"});s.use(a.initReactI18next).init();const c=s;var u,l=r(8416),h=r(2571);function g(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p{constructor(){this._anyWindow=window,this._renderAISearchModal=new h.Subject}async start(){this._anyWindow.hackathon2023RenderAISearchModal=e=>{this._renderAISearchModal.next(e)}}get renderAISearchModalReceived(){return this._renderAISearchModal}}function f(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}u=p,g(p,"getInstance",(()=>(u._windowEventService||(u._windowEventService=new u),u._windowEventService))),g(p,"resetInstance",(()=>(u._windowEventService=new u,u._windowEventService)));class d{constructor(){f(this,"propertyChangeSubject",new h.Subject),f(this,"getContext",(()=>({prop1:this._userFullName,prop2:this._prop2}))),f(this,"getJsonStringContext",(()=>JSON.stringify(this.getContext()))),this._userFullName="",this._prop2=""}set userFullName(e){this._userFullName!==e&&(this._userFullName=e,this.propertyChangeSubject.next({propertyName:"userFullName",propertyValue:e}))}get userFullName(){return this._userFullName}set prop2(e){this._prop2!==e&&(this._prop2=e,this.propertyChangeSubject.next({propertyName:"prop2",propertyValue:e}))}get prop2(){return this._prop2}static getInstance(){return this._contextService||(this._contextService=new d),this._contextService}static resetInstance(){return this._contextService=new d,this._contextService}}var v,m,S=r(2332);function b(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class y{constructor(){var e=this;b(this,"httpPost",(async function(t,r,n){const a=n||new Headers;a.append("Content-Type","application/json");const i=await fetch(`${e._baseUrl}${t.startsWith("/")?t:`/${t}`}`,{method:"POST",headers:a,body:JSON.stringify(r)});if(i.ok)return i;throw new Error(`Response code: ${i.status} does not indicate a successful operation`)})),this._baseUrl="http://localhost:3400/api"}}function w(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}v=y,b(y,"getInstance",(()=>(v._dataService||(v._dataService=new v),v._dataService))),b(y,"resetInstance",(()=>(v._dataService=new v,v._dataService)));class j{constructor(){var e=this;w(this,"callLlm",(async function(t){try{const r=await e._dataService.httpPost("llm/call",t);return JSON.stringify(await r.json())}catch(e){throw console.error("Llm call error: ",e),e}})),this._dataService=y.getInstance()}}function _(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}m=j,w(j,"getInstance",(()=>(m._langchainApiService||(m._langchainApiService=new m),m._langchainApiService))),w(j,"resetInstance",(()=>(m._langchainApiService=new m,m._langchainApiService)));class x{constructor(){_(this,"logUnknownError",(e=>{const t=e,r={description:t.message?t.message:e,exception:e};this.logError(r)})),_(this,"logError",(e=>{this.errorSubject.next(e)})),_(this,"logSuccess",(e=>{this.successSubject.next(e)})),this.errorSubject=new h.Subject,this.successSubject=new h.Subject}static getInstance(){return this._validationService||(this._validationService=new x),this._validationService}static resetInstance(){return this._validationService=new x,this._validationService}}var N=r(5893);const O=new Map([["en","English"],["fr","French"],["hi","Hindi"]]);var P=function(e){return e.inline="inline",e}(P||{});const E=e=>{const{t}=(0,a.useTranslation)(),r=(0,l.useRef)(j.getInstance()),n=(0,l.useRef)(x.getInstance()),[i,o]=(0,l.useState)(""),[s,u]=(0,l.useState)(""),[h,g]=(0,l.useState)([]),[p,f]=(0,l.useState)([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}]),[d,v]=(0,l.useState)(O.has(window.navigator.language)?window.navigator.language:"en");return(0,l.useEffect)((()=>{o(""),g([]),f([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}]),v(O.has(window.navigator.language)?window.navigator.language:"en")}),[e.aiSearchModalOpen]),(0,l.useEffect)((()=>{c.changeLanguage(d),f([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}])}),[d]),(0,l.useEffect)((()=>{u(e.userFullName)}),[e.userFullName]),e.aiSearchModalOpen?(0,N.jsxs)(S.Modal,{header:t("aiSearchModal.header"),size:"medium",open:e.aiSearchModalOpen,onNeClose:e.onAISearchModalClose,children:[(0,N.jsxs)("div",{className:"content-container",children:[(0,N.jsx)("div",{className:"chat-container",children:h.map(((e,t)=>(0,N.jsxs)("div",{className:"chat-item-row "+("human"===e.user?"right-align":"left-align"),children:[(0,N.jsx)("div",{className:"left-triangle"}),(0,N.jsx)("span",{className:"chat-item",children:e.loading?(0,N.jsx)(S.Spinner,{className:"spinner",size:P.inline,wrapped:!1}):e.text}),(0,N.jsx)("div",{className:"right-triangle"})]},t)))}),(0,N.jsxs)("div",{className:"question-container",children:[(0,N.jsx)(S.Textarea,{className:"question-textarea",rows:4,placeholder:t("aiSearchModal.questionTextAreaPlaceholder"),onNeInput:e=>{o(e.detail.value)}}),(0,N.jsx)(S.Button,{className:"ask-button",onNeClick:async()=>{const e=[...h,{user:"human",text:i,loading:!1},{user:"ai",text:"",loading:!0}];g(e);let t="";try{const n={prompt:i,historyId:s,config:{useHistory:!0,useVectorStore:!0,language:O.get(d)}};t=await r.current.callLlm(n);const a=[...e];a[a.length-1].text=t,a[a.length-1].loading=!1,g(a)}catch(r){n.current.logUnknownError(r),t="";const a=[...e];a.pop(),g(a)}},children:t("actions.ask")})]})]}),(0,N.jsx)(S.DropdownField,{className:"language-switcher-dropdown-field",slot:"footer",value:d,dataList:p,onNeChange:e=>{const t=e;t.detail.value&&O.has(t.detail.value)&&v(t.detail.value)}})]}):(0,N.jsx)(N.Fragment,{})};function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}const k=()=>{const e=(0,l.useRef)(d.getInstance()),t=(0,l.useRef)(p.getInstance()),[r,n]=(0,l.useState)(!1);(0,l.useEffect)((()=>{const r=t.current.renderAISearchModalReceived.subscribe((t=>{e.current.userFullName=t.userFullName,t.prop2&&(e.current.prop2=t.prop2),n(!0)}));return()=>{r.unsubscribe()}}),[]);const a={aiSearchModalOpen:r,userFullName:e.current.userFullName,onAISearchModalClose:async()=>{n(!1)}};return(0,N.jsx)(E,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){var n,a,i;n=e,a=t,i=r[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(a))in n?Object.defineProperty(n,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[a]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},a))};let F=function(e){return e.info="info",e.success="success",e.danger="danger",e.warning="warning",e}({});const M=()=>{const e=(0,l.useRef)(x.getInstance()),t=e=>{const t=document.querySelector("ne-toast-notification");null==t||t.showToast(e)};return(0,l.useEffect)((()=>{const r=e.current.errorSubject.subscribe({next:e=>(e=>{const r={content:e.description,"alert-type":F.danger,closable:!0,autoClose:!1};t(r)})(e)}),n=e.current.successSubject.subscribe({next:e=>(e=>{const r={content:e.description,"alert-type":F.success,closable:!0,autoClose:!0,duration:600};t(r)})(e)});return()=>{r.unsubscribe(),n.unsubscribe()}}),[]),(0,N.jsx)(S.ToastNotification,{})},T=()=>{const e=(0,l.useRef)(p.getInstance());return(0,l.useEffect)((()=>{e.current.start()}),[]),(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(k,{}),(0,N.jsx)(M,{})]})},A=document.getElementById("hackathon2023-mfe"),C=(0,n.s)(A),R=c;R.changeLanguage(window.navigator.language),C.render((0,N.jsx)(a.I18nextProvider,{i18n:R,children:(0,N.jsx)(T,{})}))},745:(e,t,r)=>{var n=r(1051);t.s=n.createRoot,n.hydrateRoot},5251:(e,t,r)=>{var n=r(8416),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,i={},u=null,l=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,n)&&!c.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===i[n]&&(i[n]=t[n]);return{$$typeof:a,type:e,key:u,ref:l,props:i,_owner:s.current}}t.Fragment=i,t.jsx=u,t.jsxs=u},5893:(e,t,r)=>{e.exports=r(5251)}}]);