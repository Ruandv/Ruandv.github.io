/*! For license information please see 48.js.LICENSE.txt */
"use strict";(self.webpackChunkhackathon2023_mfe=self.webpackChunkhackathon2023_mfe||[]).push([[48],{7048:(e,t,n)=>{n.r(t);var r=n(745),a=n(136),i=n(5146);const o={en:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"Ask"},"aiSearchModal":{"questionTextAreaPlaceholder":"Type any question","header":"How can I help you today?"},"languages":{"english":"English","french":"Français (French)","hindi":"हिंदी (Hindi)"}}')},fr:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"Poser"},"aiSearchModal":{"questionTextAreaPlaceholder":"Tapez n\'importe quelle question","header":"Comment puis-je vous aider aujourd\'hui?"},"languages":{"english":"English (Anglais)","french":"Français","hindi":"हिंदी (Hindi)"}}')},hi:{hackathon2023Mfe:JSON.parse('{"actions":{"ask":"पूछना"},"aiSearchModal":{"questionTextAreaPlaceholder":"कोई भी प्रश्न टाइप करें","header":"आज मैं आपकी मदद करने में कैसे सक्षम हूं?"},"languages":{"english":"English (अंग्रेज़ी)","french":"Français (फ़्रेंच)","hindi":"हिंदी"}}')}},s=(0,i.createInstance)({fallbackLng:"en",debug:!0,cleanCode:!0,resources:o,defaultNS:"hackathon2023Mfe"});s.use(a.initReactI18next).init();const c=s;var l,u=n(8416),h=n(2571);function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class g{constructor(){this._anyWindow=window,this._renderAISearchModal=new h.Subject}async start(){this._anyWindow.hackathon2023RenderAISearchModal=e=>{this._renderAISearchModal.next(e)}}get renderAISearchModalReceived(){return this._renderAISearchModal}}l=g,d(g,"getInstance",(()=>(l._windowEventService||(l._windowEventService=new l),l._windowEventService))),d(g,"resetInstance",(()=>(l._windowEventService=new l,l._windowEventService)));var f=n(2332);const v=()=>(65536*(1+Math.random())|0).toString(16).substring(1);var p,b;function S(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class w{constructor(){var e=this;S(this,"httpPost",(async function(t,n,r){const a=r||new Headers;a.append("Content-Type","application/json");const i=await fetch(`${e._baseUrl}${t.startsWith("/")?t:`/${t}`}`,{method:"POST",headers:a,body:JSON.stringify(n)});if(i.ok)return i;throw new Error(`Response code: ${i.status} does not indicate a successful operation`)})),this._baseUrl="http://localhost:3400/api"}}function m(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}p=w,S(w,"getInstance",(()=>(p._dataService||(p._dataService=new p),p._dataService))),S(w,"resetInstance",(()=>(p._dataService=new p,p._dataService)));class y{constructor(){var e=this;m(this,"callLlm",(async function(t){try{const n=await e._dataService.httpPost("llm/call",t);return JSON.stringify(await n.json())}catch(e){throw console.error("Llm call error: ",e),e}})),this._dataService=w.getInstance()}}function j(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}b=y,m(y,"getInstance",(()=>(b._langchainApiService||(b._langchainApiService=new b),b._langchainApiService))),m(y,"resetInstance",(()=>(b._langchainApiService=new b,b._langchainApiService)));class x{constructor(){j(this,"logUnknownError",(e=>{const t=e,n={description:t.message?t.message:e,exception:e};this.logError(n)})),j(this,"logError",(e=>{this.errorSubject.next(e)})),j(this,"logSuccess",(e=>{this.successSubject.next(e)})),this.errorSubject=new h.Subject,this.successSubject=new h.Subject}static getInstance(){return this._validationService||(this._validationService=new x),this._validationService}static resetInstance(){return this._validationService=new x,this._validationService}}var _=n(5893);const O=new Map([["en","English"],["fr","French"],["hi","Hindi"]]);var P=function(e){return e.inline="inline",e}(P||{});const E=e=>{const{t}=(0,a.useTranslation)(),n=(0,u.useRef)(y.getInstance()),r=(0,u.useRef)(x.getInstance()),[i,o]=(0,u.useState)(""),[s,l]=(0,u.useState)([]),[h,d]=(0,u.useState)([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}]),[g,p]=(0,u.useState)(O.has(window.navigator.language)?window.navigator.language:"en");return(0,u.useEffect)((()=>{o(""),l([]),d([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}]),p(O.has(window.navigator.language)?window.navigator.language:"en")}),[e.aiSearchModalOpen]),(0,u.useEffect)((()=>{c.changeLanguage(g),d([{text:t("languages.english"),value:"en"},{text:t("languages.french"),value:"fr"},{text:t("languages.hindi"),value:"hi"}])}),[g]),e.aiSearchModalOpen?(0,_.jsxs)(f.Modal,{header:t("aiSearchModal.header"),size:"medium",open:e.aiSearchModalOpen,onNeClose:e.onAISearchModalClose,children:[(0,_.jsxs)("div",{className:"content-container",children:[(0,_.jsx)("div",{className:"chat-container",children:s.map(((e,t)=>(0,_.jsxs)("div",{className:"chat-item-row "+("human"===e.user?"right-align":"left-align"),children:[(0,_.jsx)("div",{className:"left-triangle"}),(0,_.jsx)("span",{className:"chat-item",children:e.loading?(0,_.jsx)(f.Spinner,{className:"spinner",size:P.inline,wrapped:!1}):e.text}),(0,_.jsx)("div",{className:"right-triangle"})]},t)))}),(0,_.jsxs)("div",{className:"question-container",children:[(0,_.jsx)(f.Textarea,{className:"question-textarea",rows:4,placeholder:t("aiSearchModal.questionTextAreaPlaceholder"),onNeInput:e=>{o(e.detail.value)}}),(0,_.jsx)(f.Button,{className:"ask-button",onNeClick:async()=>{const e=[...s,{user:"human",text:i,loading:!1},{user:"ai",text:"",loading:!0}];l(e);let t="";try{const r={prompt:i,historyId:`${v()}${v()}-${v()}-${v()}-${v()}-${v()}${v()}${v()}`,config:{useHistory:!0,useVectorStore:!0,language:O.get(g)}};t=await n.current.callLlm(r);const a=[...e];a[a.length-1].text=t,a[a.length-1].loading=!1,l(a)}catch(n){r.current.logUnknownError(n),t="";const a=[...e];a.pop(),l(a)}},children:t("actions.ask")})]})]}),(0,_.jsx)(f.DropdownField,{className:"language-switcher-dropdown-field",slot:"footer",value:g,dataList:h,onNeChange:e=>{const t=e;t.detail.value&&O.has(t.detail.value)&&p(t.detail.value)}})]}):(0,_.jsx)(_.Fragment,{})};function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}const k=()=>{const e=(0,u.useRef)(g.getInstance()),[t,n]=(0,u.useState)(!1);(0,u.useEffect)((()=>{const t=e.current.renderAISearchModalReceived.subscribe((()=>{n(!0)}));return()=>{t.unsubscribe()}}),[]);const r={aiSearchModalOpen:t,onAISearchModalClose:async()=>{n(!1)}};return(0,_.jsx)(E,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){var r,a,i;r=e,a=t,i=n[t],(a=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(a))in r?Object.defineProperty(r,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[a]=i})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r))};let N=function(e){return e.info="info",e.success="success",e.danger="danger",e.warning="warning",e}({});const M=()=>{const e=(0,u.useRef)(x.getInstance()),t=e=>{const t=document.querySelector("ne-toast-notification");null==t||t.showToast(e)};return(0,u.useEffect)((()=>{const n=e.current.errorSubject.subscribe({next:e=>(e=>{const n={content:e.description,"alert-type":N.danger,closable:!0,autoClose:!1};t(n)})(e)}),r=e.current.successSubject.subscribe({next:e=>(e=>{const n={content:e.description,"alert-type":N.success,closable:!0,autoClose:!0,duration:600};t(n)})(e)});return()=>{n.unsubscribe(),r.unsubscribe()}}),[]),(0,_.jsx)(f.ToastNotification,{})},A=()=>{const e=(0,u.useRef)(g.getInstance());return(0,u.useEffect)((()=>{e.current.start()}),[]),(0,_.jsxs)(_.Fragment,{children:[(0,_.jsx)(k,{}),(0,_.jsx)(M,{})]})},T=document.getElementById("hackathon2023-mfe"),R=(0,r.s)(T),C=c;C.changeLanguage(window.navigator.language),R.render((0,_.jsx)(a.I18nextProvider,{i18n:C,children:(0,_.jsx)(A,{})}))},745:(e,t,n)=>{var r=n(1051);t.s=r.createRoot,r.hydrateRoot},5251:(e,t,n)=>{var r=n(8416),a=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var r,i={},l=null,u=null;for(r in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(u=t.ref),t)o.call(t,r)&&!c.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:a,type:e,key:l,ref:u,props:i,_owner:s.current}}t.Fragment=i,t.jsx=l,t.jsxs=l},5893:(e,t,n)=>{e.exports=n(5251)}}]);